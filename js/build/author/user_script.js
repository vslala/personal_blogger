// Generated by CoffeeScript 1.10.0
(function() {
  var flashMessage;

  $(function() {
    $('#image_form').submit(function(event) {
      var data, links, loading, url;
      event.preventDefault();
      loading = "<div id='loader'><img src='http://www.west-info.eu/files/grey-dots.gif' style='height: 75px;' /></div>";
      links = $('#return_server_links');
      $(links).append(loading);
      url = $(this).attr('action');
      data = $(this).serialize();
      return $.ajax({
        url: url,
        type: 'POST',
        data: data,
        success: function(data) {
          data = $.parseJSON(data);
          $(links).append('<p>' + data.url + '</p>');
          $('#loader').remove();
          return null;
        },
        error: function(xhr, status, msg) {
          return console.log(xhr.responseText);
        }
      });
    });
    return CKEDITOR.replace('blog_content');
  });

  flashMessage = $('#flash_message');

  $('.userProfileForm').submit(function(event) {
    var data, files, url;
    event.preventDefault();
    files = $('#file_upload').prop('files');
    url = $(this).attr('action');
    data = $(this).serialize();
    return $.ajax({
      url: url,
      data: data,
      type: 'POST',
      success: function(data) {
        data = $.parseJSON(data);
        $(flashMessage).html("Updated Successfully!");
        return null;
      },
      error: function(xhr, status, msg) {
        console.log(xhr);
        return null;
      }
    });
  });

  getCurrentDate(function() {
    var currentDate, date, day, month, year;
    date = new Date();
    day = date.getDate();
    month = date.getMonth() + 1;
    year = date.getFullYear();
    currentDate = year + '/' + month + '/' + day;
    return currentDate;
  });

}).call(this);
